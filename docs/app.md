<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## cache

Caches files to prevent application from making excessive requests to APIs

### update

Creates a new file in the cache, populating it with specified data

#### Parameters

-   `filePath` **[Object][1]** Location to cache file
-   `fileData` **[Object][1]** Data to write to file

### delete

Deletes the cache directory

#### Parameters

-   `dir` **[Object][1]** Location of cache directory

### read

Reads a file in the cache, fetching from store if not found

#### Parameters

-   `storePath` **[String][2]** Path to file in store
-   `cachePath` **[String][2]** Path to file in cache

Returns **([Promise][3] \| [Object][1])** Fetched file object

## indieauth

Use [IndieAuth][4] to ensure only
authenticated users can use endpoint for posting to configured destination.

### request

Authenticates an access token with IndieAuth token endpoint

#### Parameters

-   `accessToken` **[String][2]** Access token
-   `endpoint` **[String][2]** IndieAuth token endpoint URL

Returns **[Promise][3]** Token endpoint reponse object

### verifyToken

Verifies that a token provides permissions to post to configured publication

#### Parameters

-   `accessToken` **[String][2]** Access token
-   `url` **[String][2]** Publication URL

Returns **[Promise][3]** Token endpoint reponse object

## memos

Records of actions and resulting changes, stored for later retrevial.
(i.e. for update and undelete actions).

### create

Creates memos file

### update

Updates memo (either by updating existing, or appending new)

#### Parameters

-   `action` **[String][2]** Entry type
-   `data` **[Object][1]** Entry data

## read

Reads memo

Returns **[Object][1]** Configuration options

## microformats

Discover, parse and transform microformats2 objects

### derviveContent

Derives content (HTML, else object value, else property value)

#### Parameters

-   `mf2` **[Object][1]** microformats2 object

Returns **[Array][5]** Content

### derivePhotoProperty

Combines referenced and attached photos into one object which can be used in
a microformats2 object. Attached photos are uploaded to GitHub.

#### Parameters

-   `mf2` **[Object][1]** microformats2 object
-   `files` **[String][2]** Photos attached as multipart data
-   `typeConfig` **[Object][1]** Post type configuration

Returns **[Promise][3]** Array of photo obejcts

### dervivePublishedProperty

Derives published date (based on microformats2 data, else the current date)

#### Parameters

-   `mf2` **[Object][1]** microformats2 object

Returns **[Array][5]** Array containing ISO formatted date

### derviveSlug

Derives slug (using `mp-slug` value, slugified name else a random number)

#### Parameters

-   `mf2` **[Object][1]** microformats2 object
-   `separator` **[String][2]** Slug separator

Returns **[Array][5]** Array containing slug value

### formEncodedToMf2

Parses microformats in form-encoded POST request.
Adapted from [node-micropub-express][6]
by [Pelle Wessman][7]

#### Parameters

-   `body` **[String][2]** Form-encoded body

Returns **[Object][1]** mf2 object

**Meta**

-   **copyright**: (c) 2016, Pelle Wessman


### htmlToMf2

Parses microformats on HTML page

#### Parameters

-   `html` **[String][2]** HTML marked up with microformats
-   `properties` **[String][2]** mf2 properties to return

Returns **[Promise][3]** mf2 object

### urlToMf2

Parses microformats at a given URL

#### Parameters

-   `url` **[String][2]** URL path to post
-   `properties` **[String][2]** mf2 properties to return

Returns **[Promise][3]** mf2 object

## push

-   **See: [https://stackoverflow.com/a/37576787/11107625][8]**

Turns out async/await doesn’t work so great with forEach loops. Use
asynchronous `await Promise.all(files.map(async file => {…}))` or
synchronous `for (const file of files) {…}` instead.
(Asynchronous pattern trips up Micropub.rocks! validator)

## micropub

Process and transform microformats in request so that it can be published to
a destination.

### createMedia

Creates a new post

#### Parameters

-   `pub` **[Object][1]** Publication configuration
-   `files` **[String][2]** File attachments

Returns **[String][2]** Location of created post

### update

Creates a new post

#### Parameters

-   `pub` **[Object][1]** Publication configuration
-   `body` **[String][2]** Body content (contains microformats2 object)
-   `files` **[String][2]** File attachments

Returns **[String][2]** Location of created post

### update

Updates a post

#### Parameters

-   `url` **[String][2]** URL path to post
-   `content` **[String][2]** Content to update

Returns **[Object][1]** Response

### delete

Deletes a post

#### Parameters

-   `url` **[String][2]** URL of published post

Returns **[Promise][3]** Response object

### error

Returns error information

#### Parameters

-   `id` **[String][2]** Identifier
-   `desc` **[String][2]** Description

Returns **[Object][1]** Error object

### response

Returns success information

#### Parameters

-   `id` **[String][2]** Identifier
-   `location` **[String][2]** Location of post

Returns **[Object][1]** Success object

### get

Responds to GET requests

#### Parameters

-   `request` **[Object][1]** Request
-   `response` **[Object][1]** Response

Returns **[Object][1]** HTTP response

### post

Responds to POST requests

#### Parameters

-   `request` **[Object][1]** Request
-   `response` **[Object][1]** Response
-   `next` **[Object][1]** Callback

Returns **[Object][1]** HTTP response

## micropub

Returns an object containing information about this application

### Parameters

-   `request` **[String][2]** HTTP request object
-   `pub` **[String][2]** Publication configuration

Returns **[Promise][3]** Query object

### createMedia

Creates a new post

#### Parameters

-   `pub` **[Object][1]** Publication configuration
-   `files` **[String][2]** File attachments

Returns **[String][2]** Location of created post

### update

Creates a new post

#### Parameters

-   `pub` **[Object][1]** Publication configuration
-   `body` **[String][2]** Body content (contains microformats2 object)
-   `files` **[String][2]** File attachments

Returns **[String][2]** Location of created post

### update

Updates a post

#### Parameters

-   `url` **[String][2]** URL path to post
-   `content` **[String][2]** Content to update

Returns **[Object][1]** Response

### delete

Deletes a post

#### Parameters

-   `url` **[String][2]** URL of published post

Returns **[Promise][3]** Response object

### error

Returns error information

#### Parameters

-   `id` **[String][2]** Identifier
-   `desc` **[String][2]** Description

Returns **[Object][1]** Error object

### response

Returns success information

#### Parameters

-   `id` **[String][2]** Identifier
-   `location` **[String][2]** Location of post

Returns **[Object][1]** Success object

### get

Responds to GET requests

#### Parameters

-   `request` **[Object][1]** Request
-   `response` **[Object][1]** Response

Returns **[Object][1]** HTTP response

### post

Responds to POST requests

#### Parameters

-   `request` **[Object][1]** Request
-   `response` **[Object][1]** Response
-   `next` **[Object][1]** Callback

Returns **[Object][1]** HTTP response

## 

-   **See: [https://stackoverflow.com/a/37576787/11107625][8]**

Turns out async/await doesn’t work so great with forEach loops. Use
asynchronous `await Promise.all(files.map(async file => {…}))` or
synchronous `for (const file of files) {…}` instead.
(Asynchronous pattern trips up Micropub.rocks! validator)

## publication

Gets a publication’s configuration and combines it with default values set by
application.

Returns **[Promise][3]** Configuration object

## string

-   **See: [Nunjucks API: renderString][9]**

Render a Nunjucks template string using context data

### Parameters

-   `string` **[String][2]** Template string
-   `context` **[String][2]** Context data

Returns **[String][2]** Rendered string

## store

Interfaces to remote locations where files and configuration are stored.

### github

Get, create and delete data at a specified path at configured GitHub repo.

## getContents

-   **See: [GitHub REST API v3: Get Contents][10]**

Reads content of a file or directory in a repository

### Parameters

-   `path` **[String][2]** Path to file

Returns **[Promise][3]** GitHub HTTP response

## createFile

-   **See: [GitHub REST API v3: Create a file][11]**

Creates a new file in a GitHub repository

### Parameters

-   `path` **[String][2]** Path to file
-   `content` **[String][2]** File content
-   `options` **[String][2]** Options

Returns **[Promise][3]** GitHub HTTP response

## updateFile

-   **See: [GitHub REST API v3: Update a file][12]**

Updates a file in a GitHub repository

### Parameters

-   `path` **[String][2]** Path to file
-   `content` **[String][2]** File content
-   `options` **[String][2]** Options

Returns **[Promise][3]** GitHub HTTP response

## deleteFile

-   **See: [GitHub REST API v3: Delete a file][13]**

Deletes a file in a GitHub repository

### Parameters

-   `path` **[String][2]** Path to file
-   `options` **[String][2]** Options

Returns **[Promise][3]** GitHub HTTP response

## utils

Common utility functions.

## decodeFormEncodedString

Decodes form-encoded string

### Parameters

-   `string` **[String][2]** String to decode

### Examples

```javascript
decodeFormEncodedString('foo+bar') => 'foo bar'
```

```javascript
decodeFormEncodedString('http%3A%2F%2Ffoo.bar') => 'http://foo.bar'
```

Returns **[String][2]** Decoded string

## excerptString

Gets first n words from a string

### Parameters

-   `string` **[String][2]** String to excerpt
-   `n` **[Number][14]** Max number of words

### Examples

```javascript
excerptString('Foo bar baz', 2) => 'Foo bar'
```

Returns **[String][2]** Excerpt

## normalizePath

Removes ‘/’ from beginning and end of string. Useful for constructing paths

### Parameters

-   `string` **[Object][1]** String

### Examples

```javascript
normalizePath('/foo/bar/') => 'foo/bar'
```

Returns **[Object][1]** Normalized object

## admin

## media

## micropub

## post

Responds to POST requests

### Parameters

-   `request` **[Object][1]** Request
-   `response` **[Object][1]** Response
-   `next` **[Object][1]** Callback

Returns **[Object][1]** HTTP response

## post

Responds to POST requests

### Parameters

-   `request` **[Object][1]** Request
-   `response` **[Object][1]** Response
-   `next` **[Object][1]** Callback

Returns **[Object][1]** HTTP response

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[4]: https://www.w3.org/TR/indieauth/

[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[6]: https://github.com/voxpelli/node-micropub-express

[7]: https://kodfabrik.se

[8]: https://stackoverflow.com/a/37576787/11107625

[9]: https://mozilla.github.io/nunjucks/api.html#renderstring

[10]: https://developer.github.com/v3/repos/contents/#get-contents

[11]: https://developer.github.com/v3/repos/contents/#create-a-file

[12]: https://developer.github.com/v3/repos/contents/#update-a-file

[13]: https://developer.github.com/v3/repos/contents/#delete-a-file

[14]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
