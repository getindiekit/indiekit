{%- from "bookmarklet/macro.njk" import bookmarklet with context -%}
{%- from "button/macro.njk" import button with context -%}
{%- from "card-grid/macro.njk" import cardGrid with context -%}
{%- from "checkboxes/macro.njk" import checkboxes with context -%}
{%- from "error-summary/macro.njk" import errorSummary with context -%}
{%- from "fieldset/macro.njk" import fieldset with context -%}
{%- from "file-grid/macro.njk" import fileGrid with context -%}
{%- from "file-list/macro.njk" import fileList with context -%}
{%- from "footer/macro.njk" import footer with context -%}
{%- from "header/macro.njk" import header with context -%}
{%- from "heading/macro.njk" import heading with context -%}
{%- from "hint/macro.njk" import hint with context -%}
{%- from "input/macro.njk" import input with context -%}
{%- from "notification/macro.njk" import notification with context -%}
{%- from "pagination/macro.njk" import pagination with context -%}
{%- from "prose/macro.njk" import prose with context -%}
{%- from "radios/macro.njk" import radios with context -%}
{%- from "section/macro.njk" import section with context -%}
{%- from "select/macro.njk" import select with context -%}
{%- from "summary/macro.njk" import summary with context -%}
{%- from "textarea/macro.njk" import textarea with context -%}
{%- from "warning-text/macro.njk" import warningText with context -%}
{%- set appClasses = "app" + (" " + appClasses if appClasses) + (" app--minimalui" if minimalui) -%}
{%- set mainClasses = "main" + (" " + mainClasses if mainClasses) -%}
<!DOCTYPE html>
<html lang="{{ application.locale }}" dir="ltr" class="color-scheme--{{ application.themeColorScheme }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="supported-color-schemes" content="light dark">

    <link rel="alternate" href="{{ application.url }}/feed.jf2" type="application/jf2feed+json" title="JF2 Feed">
    <link rel="alternate" href="{{ application.url }}/feed.json" type="application/feed+json" title="JSON Feed">
    <link rel="apple-touch-icon" href="{{ application.url }}{{ assetPath | default("/assets") }}/app.png">
    <link rel="icon" href="{{ application.url }}{{ assetPath | default("/assets") }}/icon.svg">
    <link rel="mask-icon" href="{{ application.url }}{{ assetPath | default("/assets") }}/icon.svg" color="{{ application.themeColor }}">
    <link rel="stylesheet" href="{{ application.url }}{{ assetPath | default("/assets") }}/app.css">
    <style>
      :root {
        {{- themeCustomProperties(application.themeColor) | indent(8) }}
      }
    </style>
    <script async defer src="{{ application.url }}{{ assetPath | default("/assets") }}/app.js" type="module"></script>
    <title>{% if errors %}Error: {% endif %}{{ title + " - " if title }}{{ application.name }}</title>
  </head>

  <body class="{{ appClasses }}">

  {%- block header %}
    {{ header({
      url: application.url,
      name: application.name,
      navigation: {
        items: application.navigation,
        label: "site"
      }
    }) | indent(4) if not minimalui }}
  {%- endblock %}

    <main class="{{ mainClasses }}" id="main"{% if mainControllers %} data-controller="{{ mainControllers }}"{% endif %}>
      {{ notification({
        classes: "notification--error" if error else "notification--success",
        title: __("error") if error else __("success"),
        text: error if error else success,
        href: errorUri
      }) | indent(6) if error or success }}
      {%- block main %}{% endblock %}
    </main>

  {%- block footer %}
    {{ footer({
      logo: {
        classes: "h-x-app",
        href: "https://getindiekit.com",
        src: application.url + assetPath | default("/assets") + "/icon.svg",
        alt: "Indiekit"
      },
      navigation: {
        items: [{
          href: application.repository.url | replace(".git", "") + "/releases/tag/v" + application.version,
          text: "v" + application.version
        }],
        label: "secondary"
      }
    }) | indent() if not minimalui }}
  {%- endblock %}
  </body>
</html>